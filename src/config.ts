// ===============================================================
//                          config.ts
//       全局配置中心（所有插件 / 系统模块统一从这里取配置）
// ===============================================================

// ⭐ 获取环境变量（为空则返回 ""）
function env(name: string, required = false): string {
  const value = Deno.env.get(name) || "";
  if (required && !value) {
    console.error(`❌ 缺少必要环境变量：${name}`);
  }
  return value;
}

// ===============================================================
//                    🟦 Telegram 基础配置
// ===============================================================
export const BOT = {
  TOKEN: env("BOT_TOKEN", true),           // Telegram Bot Token
  USERNAME: env("BOT_USERNAME"),           // 机器人用户名（可选）
  API: "",                                 // 自动生成下面 API
};

// 自动生成 API 地址
BOT.API = `https://api.telegram.org/bot${BOT.TOKEN}`;

// ===============================================================
//                    💬 AI 系统配置
// ===============================================================
export const AI = {
  OPENAI_KEY: env("OPENAI_API_KEY"),       // OpenAI API KEY
  MODEL: "gpt-4o-mini",                    // 默认模型，可修改
};

// ===============================================================
//                    💰 钱包 / USDT 配置
// ===============================================================
export const WALLET = {
  TRC20_ADDRESS: env("USDT_TRC20_ADDRESS"),  // 收款地址
  MIN_DEPOSIT: 5,                             // 默认最低充值
  MIN_WITHDRAW: 10,                           // 默认最低提现
  FEE_DEPOSIT: 0,                              // 默认充值手续费
  FEE_WITHDRAW: 0,                             // 默认提现手续费
};

// ===============================================================
//                       🟨 VIP 系统
// ===============================================================
export const VIP = {
  DEFAULT_DAYS: 30,                // 默认 VIP 天数
  MONTH_PRICE: 20,                 // 默认月费（美元或 USDT）
  AUTO_RENEW: false,               // 默认不开启自动续费
};

// ===============================================================
//                       📢 广播系统
// ===============================================================
export const BROADCAST = {
  MAX_QUEUE: 100,                  // 广播队列最大数量
  SEND_DELAY: 50,                  // 每条消息延迟（毫秒）
};

// ===============================================================
//                       📰 广告系统
// ===============================================================
export const ADS = {
  ENABLE: true,                    // 广告系统总开关
};

// ===============================================================
//                     📦 供需（供求）系统
// ===============================================================
export const SUPPLY = {
  MAX_POST_PER_DAY: 5,             // 每天最大发布条数
  AUTO_CHECK: false,               // 是否开启自动审核
};

// ===============================================================
//                     🌏 多语言系统配置
// ===============================================================
export const LANG = {
  DEFAULT: "en",                   // 默认语言
};

// ===============================================================
//                       🌐 BASE URL
// ===============================================================
export const BASE = {
  URL: env("BASE_URL"),            // 机器人部署域名（可选）
};

// ===============================================================
// 全部导出（方便统一使用）
// ===============================================================
export default {
  BOT,
  AI,
  VIP,
  WALLET,
  BROADCAST,
  ADS,
  SUPPLY,
  LANG,
  BASE,
};
